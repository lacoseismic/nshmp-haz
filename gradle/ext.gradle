/*
 * Extra properties config.
 */
ext {
  projectName = 'nshmp-haz'

  propsPath = '/classes/java/main/service.properties'

  libsDir = "libs"
  nshmpLib = "${libsDir}/nshmp-lib-artifacts"
  nshmpLibGradleDir = "${nshmpLib}/gradle"
  spotbugsDir = "${nshmpLib}/gradle"
  spotlessDir = "${nshmpLib}/src/main/resources"

  /* Multi-model repository paths for version tracking */
  repo_cous_2008 = '../nshm-cous-2008'
  repo_cous_2014 = '../nshm-cous-2014'
  repo_cous_2014b = '../nshm-cous-2014b'
  repo_cous_2018 = '../nshm-cous-2018'
  repo_hi_2020 = '../nshm-hi-2020'
  repo_ak_2007 = '../nshm-ak-2007'

  /* Explicit model paths */
  model_wus_2008 = "${repo_cous_2008}/Western US"
  model_ceus_2008 = "${repo_cous_2008}/Central & Eastern US"
  model_wus_2014 = "${repo_cous_2014}/Western US"
  model_ceus_2014 = "${repo_cous_2014}/Central & Eastern US"
  model_wus_2014b = "${repo_cous_2014b}/Western US"
  model_wus_2018 = "${repo_cous_2018}/Western US"
  model_ceus_2018 = "${repo_cous_2018}/Central & Eastern US"
  model_hi_2020 = "${repo_hi_2020}"
  model_ak_2007 = "${repo_ak_2007}"

  /* Production models */
  prod_models = [
    [
      model_ak_2007,
      'models/ak/2007'
    ],
    [
      model_ceus_2008,
      'models/ceus/2008'
    ],
    [
      model_wus_2008,
      'models/wus/2008'
    ],
    [
      model_ceus_2014,
      'models/ceus/2014'
    ],
    [
      model_wus_2014,
      'models/wus/2014'
    ],
    [
      model_wus_2014b,
      'models/wus/2014b' ]
  ]

  /* Development models */
  dev_models = [
    [
      model_ceus_2018,
      'models/ceus/2018'
    ],
    [
      model_wus_2018,
      'models/wus/2018'
    ],
    [
      model_hi_2020,
      'models/hi/2020' ]
  ]

  getGitTag = { gitDir ->
    def cmd = 'git --git-dir=' + gitDir + '/.git describe --tags'
    return cmd.execute().text.replace('\n', '') ?: 'unknown'
  }

  /*
   * The git-dir option gets the correct tag when
   * build is called from nshmp-haz-ws.
   */
  gitCommand = 'git --git-dir=../nshmp-haz/.git describe --tags'
  gitTag = gitCommand.execute().text.replace('\n', '') ?: 'unknown'
  gitLink = '<a href="https://github.com/usgs/nshmp-haz">' + gitTag +'</a>'
  propsPath = '/resources/main/app.properties'
  docTitle = projectName + ': ' + gitLink
  docFooter = '<div style="float: left; font-size: 16px; text-align: right; ' +
      'padding: 10px; width: 100%; box-sizing: border-box; background-color: #f9f9f9">' +
      '<b><a href="https://www.usgs.gov" target="_top">U.S. Geological Survey</a></b> ' +
      '– National Seismic Hazard Model Project ' +
      '(<a href="https://earthquake.usgs.gov/hazards/" target="_top">NSHMP</a>) ' +
      '– <a href="https://github.com/usgs/nshmp-haz/blob/master/LICENSE.md" ' +
      'target="_top">License</a> | <b>' + gitLink + '</b></div>'
  docOut = findProperty('javadoc_loc')
  thinJar = false
}
